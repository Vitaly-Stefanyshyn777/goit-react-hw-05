import{j as e,r as i}from"./react-BvMUtuR1.js";import{b as j}from"./films-api-DhFlybDX.js";import{S as r}from"./react-loading-skeleton-DSROPNqW.js";import{f as p}from"./date-fns-BzRktsyD.js";import{c as y}from"./react-router-Uind0jIb.js";import"./classnames-C9FZUsQl.js";import"./axios-CCb-kr4I.js";import"./cookie-DmSiaxFR.js";import"./react-dom-BPTPhIog.js";import"./scheduler-CzFDRTuY.js";const I="_reviewItemTitle_duyx9_1",N="_reviewItemUserName_duyx9_12",g="_reviewItemSpan_duyx9_21",k="_reviewItemDate_duyx9_26",C="_reviewItemContent_duyx9_34",f="_skeletonAuthor_duyx9_46",A="_skeletonUsername_duyx9_50",R="_skeletonDate_duyx9_54",D="_skeletonContent_duyx9_58",n={reviewItemTitle:I,reviewItemUserName:N,reviewItemSpan:g,reviewItemDate:k,reviewItemContent:C,skeletonAuthor:f,skeletonUsername:A,skeletonDate:R,skeletonContent:D},S=({dataReviews:m,isLoading:c})=>{if(c)return e.jsxs("div",{className:n.reviewItem,children:[e.jsx(r,{height:20,width:"50%",className:n.skeletonAuthor}),e.jsx(r,{height:15,width:"30%",className:n.skeletonUsername}),e.jsx(r,{height:15,width:"40%",className:n.skeletonDate}),e.jsx(r,{height:60,width:"100%",className:n.skeletonContent})]});const{author:l,author_details:h,content:d,created_at:u}=m,a=p(new Date(u),"MMMM dd yyyy HH:mm:ss");return e.jsxs("div",{className:n.reviewItem,children:[e.jsx("h2",{className:n.reviewAuthor,children:l}),e.jsxs("p",{className:n.reviewUsername,children:[e.jsx("span",{className:n.label,children:"Username:"})," ",h.username]}),e.jsx("p",{className:n.reviewDate,children:a}),e.jsx("p",{className:n.reviewContent,children:d})]})},U="_reviewList_xyjga_1",F="_reviewNotFound_xyjga_8",b="_reviewItem_xyjga_21",B="_author_xyjga_35",L="_commentForm_xyjga_40",M="_commentInput_xyjga_47",T="_addCommentButton_xyjga_64",E="_skeletonItem_xyjga_88",$="_skeletonAuthor_xyjga_96",H="_skeletonContent_xyjga_100",O="_noReviews_xyjga_106",s={reviewList:U,reviewNotFound:F,reviewItem:b,author:B,commentForm:L,commentInput:M,addCommentButton:T,skeletonItem:E,skeletonAuthor:$,skeletonContent:H,noReviews:O},X=({initialLoadingTime:m=3e3})=>{const{id:c}=y(),[l,h]=i.useState([]),[d,u]=i.useState([]),[a,_]=i.useState(""),[w,v]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const o=await j(c,"/reviews");h(o.results)}catch(o){console.error(o)}finally{const o=setTimeout(()=>{v(!1)},m);return()=>clearTimeout(o)}})()},[c,m]);const x=()=>{if(a.trim()==="")return;const t={id:Date.now(),content:a,author:"You"};u(o=>[...o,t]),_("")};return e.jsx("section",{className:s.reviewsSection,children:w?e.jsx("ul",{className:s.reviewList,children:Array.from({length:3}).map((t,o)=>e.jsxs("li",{className:s.reviewItem,children:[e.jsx("div",{className:s.author,children:e.jsx(r,{height:20,width:"30%"})}),e.jsxs("div",{children:[e.jsx(r,{height:15,width:"90%",style:{marginBottom:"5px",borderRadius:"4px"}}),e.jsx(r,{height:15,width:"85%",style:{borderRadius:"4px"}})]})]},o))}):e.jsxs(e.Fragment,{children:[l.length===0&&d.length===0&&e.jsx("p",{className:s.noReviews,children:"No reviews available for this movie. Be the first to leave a comment below!"}),e.jsxs("ul",{className:s.reviewList,children:[l.map(t=>e.jsx("li",{className:s.reviewItem,children:e.jsx(S,{dataReviews:t})},t.id)),d.map(t=>e.jsxs("li",{className:s.reviewItem,children:[e.jsxs("p",{className:s.author,children:["Author: ",t.author]}),e.jsx("p",{children:t.content})]},t.id))]}),e.jsxs("div",{className:s.commentForm,children:[e.jsx("textarea",{className:s.commentInput,placeholder:"Add your comment...",value:a,onChange:t=>_(t.target.value)}),e.jsx("button",{className:s.addCommentButton,onClick:x,children:"Add Comment"})]})]})})};export{X as default};
