import{j as e,c as p,r as i}from"./index-CQhiNy-c.js";import{S as r,b as j}from"./index-DEVW6Vpp.js";/* empty css                 */import{f as I}from"./format-BzRktsyD.js";const N="_reviewItemTitle_17cpf_1",f="_reviewItemUserName_17cpf_10",k="_reviewItemSpan_17cpf_17",C="_reviewItemDate_17cpf_21",g="_reviewItemContent_17cpf_28",y="_skeletonAuthor_17cpf_192",A="_skeletonUsername_17cpf_196",R="_skeletonDate_17cpf_200",D="_skeletonContent_17cpf_204",n={reviewItemTitle:N,reviewItemUserName:f,reviewItemSpan:k,reviewItemDate:C,reviewItemContent:g,skeletonAuthor:y,skeletonUsername:A,skeletonDate:R,skeletonContent:D},S=({dataReviews:m,isLoading:c})=>{if(c)return e.jsxs("div",{className:n.reviewItem,children:[e.jsx(r,{height:20,width:"50%",className:n.skeletonAuthor}),e.jsx(r,{height:15,width:"30%",className:n.skeletonUsername}),e.jsx(r,{height:15,width:"40%",className:n.skeletonDate}),e.jsx(r,{height:60,width:"100%",className:n.skeletonContent})]});const{author:l,author_details:d,content:h,created_at:_}=m,a=I(new Date(_),"MMMM dd yyyy HH:mm:ss");return e.jsxs("div",{className:n.reviewItem,children:[e.jsx("h2",{className:n.reviewAuthor,children:l}),e.jsxs("p",{className:n.reviewUsername,children:[e.jsx("span",{className:n.label,children:"Username:"})," ",d.username]}),e.jsx("p",{className:n.reviewDate,children:a}),e.jsx("p",{className:n.reviewContent,children:h})]})},U="_reviewList_1725t_201",F="_reviewNotFound_1725t_1",b="_reviewItem_1725t_9",B="_author_1725t_235",L="_commentForm_1725t_240",M="_commentInput_1725t_247",T="_addCommentButton_1725t_264",E="_skeletonItem_1725t_288",$="_skeletonAuthor_1725t_296",H="_skeletonContent_1725t_300",O="_noReviews_1725t_306",s={reviewList:U,reviewNotFound:F,reviewItem:b,author:B,commentForm:L,commentInput:M,addCommentButton:T,skeletonItem:E,skeletonAuthor:$,skeletonContent:H,noReviews:O},G=({initialLoadingTime:m=3e3})=>{const{id:c}=p(),[l,d]=i.useState([]),[h,_]=i.useState([]),[a,w]=i.useState(""),[v,u]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const o=await j(c,"/reviews");d(o.results)}catch(o){console.error(o)}finally{const o=setTimeout(()=>{u(!1)},m);return()=>clearTimeout(o)}})()},[c,m]);const x=()=>{if(a.trim()==="")return;const t={id:Date.now(),content:a,author:"You"};_(o=>[...o,t]),w("")};return e.jsx("section",{className:s.reviewsSection,children:v?e.jsx("ul",{className:s.reviewList,children:Array.from({length:3}).map((t,o)=>e.jsxs("li",{className:s.reviewItem,children:[e.jsx("div",{className:s.author,children:e.jsx(r,{height:20,width:"30%"})}),e.jsxs("div",{children:[e.jsx(r,{height:15,width:"90%",style:{marginBottom:"5px",borderRadius:"4px"}}),e.jsx(r,{height:15,width:"85%",style:{borderRadius:"4px"}})]})]},o))}):e.jsxs(e.Fragment,{children:[l.length===0&&h.length===0&&e.jsx("p",{className:s.noReviews,children:"No reviews available for this movie. Be the first to leave a comment below!"}),e.jsxs("ul",{className:s.reviewList,children:[l.map(t=>e.jsx("li",{className:s.reviewItem,children:e.jsx(S,{dataReviews:t})},t.id)),h.map(t=>e.jsxs("li",{className:s.reviewItem,children:[e.jsxs("p",{className:s.author,children:["Author: ",t.author]}),e.jsx("p",{children:t.content})]},t.id))]}),e.jsxs("div",{className:s.commentForm,children:[e.jsx("textarea",{className:s.commentInput,placeholder:"Add your comment...",value:a,onChange:t=>w(t.target.value)}),e.jsx("button",{className:s.addCommentButton,onClick:x,children:"Add Comment"})]})]})})};export{G as default};
